
<dom-module id="ghvz-leaderboard-summary">
  <script>
    // Not sure why this HTMLImports.whenReady is really needed.
    // Something about polymer initialization order.
    // I think we're not supposed to need this.
    HTMLImports.whenReady(() => {
     Polymer({
      is: 'ghvz-leaderboard-summary',

      properties: {
        players: {
          type: Array,
          value: function() { return []; },
        },
        numToShow: {
          type: Number,
          value: 3,
        },
      },

      makeTableBlueprint_: function() {
        return {
          columns: [
            {
              name: "Name",
              getModel: (player) => player.name,
              getValue: (player) => {
                var div = document.createElement('div');
                div.appendChild(document.createTextNode(player.name));
                var iconButton = document.createElement('paper-icon-button');
                iconButton.classList.add("player-icon");
                iconButton.icon = "icons:open-in-new";
                iconButton.dataset.playerId = player.id;
                div.appendChild(iconButton);
                this.scopeSubtree(div); // So we can style it from our <style>
                return div;
              },
            },
            {
              property: "points",
              name: "Points"
            },
          ],
          actions: [
            {
              action: "view",
              name: "View",
            },
            {
              action: "grr",
              name: "Grr",
            },
          ]
        };
      },
    });
  });
 </script>
 <template>
  <style>
    auto-table {
      display: block;
    }
    .player-icon {
      opacity: .5;
    }
  </style>
<ghvz-auto-table
id="leaderboardTable"
blueprint="[[makeTableBlueprint_()]]"
items="[[players]]">
</ghvz-auto-table>
</template>
</dom-module>

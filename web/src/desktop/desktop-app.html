
<dom-module id="ghvz-desktop-app">
  <script>
    // Not sure why this HTMLImports.whenReady is really needed.
    // Something about polymer initialization order.
    // I think we're not supposed to need this.
    HTMLImports.whenReady(() => {
      Polymer({
        is: 'ghvz-desktop-app',

        properties: {
          bridge: Object,
          database: Object,

          userId: {
            type: String,
          },

          gameId: {
            type: String,
            notify: true,
          },

          playerId: {
            type: String,
            notify: true,
          },
        },

        listeners: {
          'ghvz-desktop-app-open-page': 'handleOpenPageEvent_',
        },

        signOut_: function() {
          this.bridge.signOut();
        },

        computeShowMainPage_(page) { return page == 'main'; },
        computeShowStatsPage_(page) { return page == 'stats'; },
      });
    });
  </script>
  <template>
  	<style>
      :host {
        display: block;
        position: relative;
        background-color: #f4f4f4;
        height: 100%;
        overflow-y: auto;
        padding: 8px;
      }
      paper-drawer-panel {
        width: 100%;
        height: 100%;
      }
      .content {
        display: block;
        margin: 16px;
      }
      #viewControls paper-checkbox {
        margin-left: 16px;
      }
      #topControls {
        display: flex;
        justify-content: space-between;
        padding: 0 16px;
        align-items: center;
      }
      #info {
        display: flex;
        justify-content: flex-end;
        padding: 0 16px;
        align-items: center;
      }
      .info {
        margin-left: 32px;
        text-align: center;
      }
  	</style>

    <template is="dom-if" if="[[computeShowMainPage_(page)]]">
      <ghvz-desktop-main-page
          bridge="[[bridge]]"
          database="[[database]]"
          game-id="[[gameId]]"
          user-id="[[userId]]"
          player-id="[[playerId]]">
      </ghvz-desktop-main-page>
    </template>

    <template is="dom-if" if="[[computeShowStatsPage_(page)]]">
      <ghvz-card full spaced>
        <div class="header">Game Stats</div>
        <ghvz-stats-page
            bridge="[[bridge]]"
            database="[[database]]"
            game-id="[[gameId]]"
            user-id="[[userId]]"
            player-id="[[playerId]]">
        </ghvz-stats-page>
      </ghvz-card>
    </template>
  </template>
</dom-module>

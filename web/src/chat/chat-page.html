<dom-module id="ghvz-chat-page">
  <script>
    // Not sure why this HTMLImports.whenReady is really needed.
    // Something about polymer initialization order.
    // I think we're not supposed to need this.
    HTMLImports.whenReady(() => {
      Polymer({
        is: 'ghvz-chat-page',

        properties: {
          bridge: Object,
          database: Object,
          user: String,
          game: String,
          player: Object,

          currentChatRoom: {
            type: Object,
            value: null,
          },
        },

        observers: [
        'onChatRoomChanged_(this.game.chatRooms.*)',
        ],

        onChatRoomChanged_: function() {

        },
      });
    });
  </script>
  <style include="iron-flex iron-flex-alignment">
    :host {
      display: block;
    }
    .chat-window {
      width: 100%;
      padding: 8px;
    }
    .chat-room-list {
      max-width: 15%;
    }
    .vertical-separator {
      border-right: 1px solid darkgray;
    }
  </style>
  <template>
    <ghvz-card full spaced>
      <div class="header">makechatnameherelsdkfjosidjfoweijfs</div>

      <div class="flex layout horizontal">
        <ghvz-chat-room-list class="chat-room-list" game="[[game]]">
        </ghvz-chat-room-list>
        <div class="vertical-separator"></div>
        <template is="dom-if" if="true">  
          <ghvz-chat-room
            bridge="[[bridge]]"
            game="[[game]]"
            current-player="[[player]]"
            chat-room="[[game.chatRooms.0]]"
            class="chat-window">
          </ghvz-chat-room>
        </template>
      </div>
    </ghvz-card>
  </template>
</dom-module>
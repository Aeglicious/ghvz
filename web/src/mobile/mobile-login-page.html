
<dom-module id="mobile-login-page">
  <script>
    // Not sure why this HTMLImports.whenReady is really needed.
    // Something about polymer initialization order.
    // I think we're not supposed to need this.
    HTMLImports.whenReady(() => {
      Polymer({
        is: 'mobile-login-page',

        properties: {
          bridge: {
            type: Object,
          },
        },

        startedShowing: function() {
        },

        logIn_: function() {
          if (!this.$.email.value) {
            alert('Enter an email');
            return;
          }
          this.bridge.sendLogInLink(this.$.email.value, null).then(
              (result) => {
                this.fire('mobile-login-page-logged-in');
              },
              (error) => {
                alert('Error logging in: ' + error);
              });
        },
      });
    });
  </script>
  <template>
    <style>
      :host {
        width: 100%;
        height: 100%;
      }
      paper-toolbar {
        @apply(--toolbar-theme);
        padding: 0 16px;
      }
      #email {
        margin: 8px;
      }
      #login {
        background-color: #03a9f4;
        color: white;
        display: block;
        text-align: center;
        margin: 8px;
      }
    </style>

    <paper-header-panel>
      <paper-toolbar>
        <div>Log In</div>
      </paper-toolbar>

      <paper-input id="email" label="email">
        <iron-icon icon="mail" prefix></iron-icon>
      </paper-input>
      <paper-button raised id="login" on-tap="logIn_">
        Log In
      </paper-button>
    </paper-header-panel>

  </template>
</dom-module>
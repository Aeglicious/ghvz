
<dom-module id="ghvz-form">
  <script>
    // Not sure why this HTMLImports.whenReady is really needed.
    // Something about polymer initialization order.
    // I think we're not supposed to need this.
    HTMLImports.whenReady(() => {
      Polymer({
        is: 'ghvz-form',

        properties: {
          title: {
            type: String,
            value: ""
          },

          openLabel: {
            type: String,
            value: "",
          },

          openIcon: {
            type: String,
            value: "",
          },

          closeLabel: {
            type: String,
            value: "",
          },

          doneLabel: {
            type: String,
            value: "",
          },

          doneEnabled: {
            type: Boolean,
            value: true,
          },
        },

        open_() {
          this.$.dialog.open();
        },

        closed_(e) {
          if (e.detail.confirmed)
            this.fire('ghvz-form-done');
        },
      });
    });
  </script>
  <template>
    <style>
      :host {
        display: inline-block;
      }
      #contents {
        display: flex;
        flex-wrap: wrap;
        margin-top: 0;
        padding-top: 0;
      }
      .button-container {
        display: flex;
        align-items: flex-end;
        justify-content: flex-end;
        margin: 8px;
      }
      paper-button {
        background-color: #9C27B0;
        color: white;
      }
      #title {
        margin-top: 0;
        color: white;
        background-color: #9C27B0;
        font-size: 13pt;
        padding: 16px;
        font-weight: bold;
      }
    </style>

    <template is="dom-if" if="[[openLabel]]">
      <paper-button raised on-tap="open_">[[openLabel]]</paper-button>
    </template>
    <template is="dom-if" if="[[openIcon]]">
      <paper-icon-button icon="[[openIcon]]" on-tap="open_"></paper-icon-button>
    </template>
    <paper-dialog id="dialog" modal on-iron-overlay-closed="closed_">
      <template is="dom-if" if="[[title]]">
        <div id="title">
          [[title]]
        </div>
      </template>
      <div id="contents">
        <content></content>
      </div>
      <div class="buttons">
        <paper-button dialog-dismiss>[[closeLabel]]</paper-button>
        <paper-button dialog-confirm autofocus>[[doneLabel]]</paper-button>
      </div>
    </paper-dialog>
  </template>
</dom-module>
